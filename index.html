<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tablette</title>
    <link rel="icon" type="image/x-icon" href="./favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <script disable-devtool-auto src='https://cdn.jsdelivr.net/npm/disable-devtool'></script>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="./styles/style.css" rel="stylesheet">
</head>
<body>
    <div class="tablet-frame">
        <div class="tablet-camera"><div class="tablet-camera-dot"></div></div>
        <main class="tablet-screen">
            <div id="notification-container"></div>
            <div class="tablet-status-bar">
                <div class="status-left">
                    <span id="tablet-time">00:00</span>
                </div>
                <div class="status-right">
                    <span id="tablet-location">21 Jump Télécom</span>
                    <svg class="status-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" style="opacity:0;"></path><path d="M2.92 9.07C3.56 7.82 4.93 7 6.5 7h11c1.57 0 2.94.82 3.58 2.07L12 20.92z" style="opacity:0.3;"></path><path d="M4.34 10.54C4.94 9.56 5.94 9 7 9h10c1.06 0 2.06.56 2.66 1.54L12 18.08z"></path></svg>
                    <span id="tablet-battery">92%</span>
                </div>
            </div>
            <div class="main-content">
                <div class="content-wrapper">
                    <header>
                        <div class="header-main">
                            <h1>Véhicules</h1>
                            <p>Liste des véhicules à récupérer.</p>
                        </div>
                        <div class="header-controls">
                            <div id="live-info" style="display: none;">
                                <span id="live-user-count"></span>
                                <span id="tablet-status-display"></span>
                            </div>
                            <button id="manage-tablet-btn" style="display: none;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 3H13C13.5523 3 14 3.44772 14 4V4.56879C14 4.99659 14.2871 5.36825 14.6822 5.53228C15.0775 5.69638 15.5377 5.63384 15.8403 5.33123L16.2426 4.92891C16.6331 4.53838 17.2663 4.53838 17.6568 4.92891L19.071 6.34312C19.4616 6.73365 19.4615 7.36681 19.071 7.75734L18.6688 8.1596C18.3661 8.46223 18.3036 8.92247 18.4677 9.31774C18.6317 9.71287 19.0034 10 19.4313 10L20 10C20.5523 10 21 10.4477 21 11V13C21 13.5523 20.5523 14 20 14H19.4312C19.0034 14 18.6318 14.2871 18.4677 14.6822C18.3036 15.0775 18.3661 15.5377 18.6688 15.8403L19.071 16.2426C19.4616 16.6331 19.4616 17.2663 19.071 17.6568L17.6568 19.071C17.2663 19.4616 16.6331 19.4616 16.2426 19.071L15.8403 18.6688C15.5377 18.3661 15.0775 18.3036 14.6822 18.4677C14.2871 18.6318 14 19.0034 14 19.4312V20C14 20.5523 13.5523 21 13 21H11C10.4477 21 10 20.5523 10 20V19.4313C10 19.0034 9.71287 18.6317 9.31774 18.4677C8.92247 18.3036 8.46223 18.3661 8.1596 18.6688L7.75732 19.071C7.36679 19.4616 6.73363 19.4616 6.34311 19.071L4.92889 17.6568C4.53837 17.2663 4.53837 16.6331 4.92889 16.2426L5.33123 15.8403C5.63384 15.5377 5.69638 15.0775 5.53228 14.6822C5.36825 14.2871 4.99659 14 4.56879 14H4C3.44772 14 3 13.5523 3 13V11C3 10.4477 3.44772 10 4 10L4.56877 10C4.99658 10 5.36825 9.71288 5.53229 9.31776C5.6964 8.9225 5.63386 8.46229 5.33123 8.15966L4.92891 7.75734C4.53838 7.36681 4.53838 6.73365 4.92891 6.34313L6.34312 4.92891C6.73365 4.53839 7.36681 4.53839 7.75734 4.92891L8.15966 5.33123C8.46228 5.63386 8.9225 5.6964 9.31776 5.53229C9.71288 5.36825 10 4.99658 10 4.56876V4C10 3.44772 10.4477 3 11 3Z"/>
                                    <path d="M14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12Z"/>
                                </svg>
                            </button>
                            <button id="admin-panel-btn" style="display: none;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M3 8L5.72187 10.2682C5.90158 10.418 6.12811 10.5 6.36205 10.5H17.6379C17.8719 10.5 18.0984 10.418 18.2781 10.2682L21 8M6.5 14H6.51M17.5 14H17.51M8.16065 4.5H15.8394C16.5571 4.5 17.2198 4.88457 17.5758 5.50772L20.473 10.5777C20.8183 11.1821 21 11.8661 21 12.5623V18.5C21 19.0523 20.5523 19.5 20 19.5H19C18.4477 19.5 18 19.0523 18 18.5V17.5H6V18.5C6 19.0523 5.55228 19.5 5 19.5H4C3.44772 19.5 3 19.0523 3 18.5V12.5623C3 11.8661 3.18166 11.1821 3.52703 10.5777L6.42416 5.50772C6.78024 4.88457 7.44293 4.5 8.16065 4.5ZM7 14C7 14.2761 6.77614 14.5 6.5 14.5C6.22386 14.5 6 14.2761 6 14C6 13.7239 6.22386 13.5 6.5 13.5C6.77614 13.5 7 13.7239 7 14ZM18 14C18 14.2761 17.7761 14.5 17.5 14.5C17.2239 14.5 17 14.2761 17 14C17 13.7239 17.2239 13.5 17.5 13.5C17.7761 13.5 18 13.7239 18 14Z"/>
                                </svg>
                            </button>
                            <button id="maintenance-mode-btn" style="display: none;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" />
                                </svg>
                            </button>
                            <button id="force-refresh-btn" style="display: none;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M4.06189 13C4.02104 12.6724 4 12.3387 4 12C4 7.58172 7.58172 4 12 4C14.5006 4 16.7332 5.14727 18.2002 6.94416M19.9381 11C19.979 11.3276 20 11.6613 20 12C20 16.4183 16.4183 20 12 20C9.61061 20 7.46589 18.9525 6 17.2916M9 17H6V17.2916M18.2002 4V6.94416M18.2002 6.94416V6.99993L15.2002 7M6 20V17.2916"/>
                                </svg>
                            </button>
                            <button id="easter-egg-btn" style="display: none;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48" fill="currentColor" stroke="currentColor">
                                    <path d="M24,4C14.843,4,8,16.143,8,27c0,10.168,6.43,17,16,17s16-6.832,16-17C40,16.143,33.157,4,24,4z M24,8c4.934,0,9.792,6.248,11.423,13.749L33,24.172l-3-3l-3,3l-3-3l-3,3l-3-3l-3,3l-2.423-2.423C14.208,14.248,19.066,8,24,8z M24,40c-5.801,0-12-3.415-12-13c0-0.055,0.006-0.11,0.006-0.166L15,29.828l3-3l3,3l3-3l3,3l3-3l3,3l2.994-2.994C35.994,26.89,36,26.945,36,27C36,36.585,29.801,40,24,40z"/>
                                </svg>
                            </button>
                        </div>
                    </header>
                    <div id="car-grid"></div>
                </div>
            </div>
        </main>
    </div>

    <div id="image-modal" class="modal-overlay">
        <div class="modal-content">
            <img id="modal-img" src="" alt="Image en grand">
        </div>
    </div>

    <div id="admin-modal-overlay" class="modal-overlay">
        <div class="admin-modal-content">
            <h2>Gérer ma cible.</h2>
            <div class="admin-form">
                <div class="form-group">
                    <label for="admin-vehicle-search">Modèle de véhicule :</label>
                    <input type="text" id="admin-vehicle-search" placeholder="Rechercher un modèle..." autocomplete="off">
                    <div id="admin-search-results"></div>
                </div>
                <div class="form-group">
                    <label for="admin-vehicle-price">Prix personnalisé (optionnel) :</label>
                    <input type="number" id="admin-vehicle-price" placeholder="Ex: 3000" autocomplete="off">
                </div>
                <div class="form-group preview-group">
                    <label>Prévisualisation :</label>
                    <div class="image-preview-container">
                        <img id="admin-vehicle-preview" src="https://placehold.co/600x400/1f1f1f/555?text=Aucun+véhicule" alt="Prévisualisation du véhicule">
                    </div>
                </div>
                <div class="form-actions">
                    <button id="admin-set-vehicle-btn" class="admin-action-btn set-btn">Définir</button>
                    <button id="admin-remove-vehicle-btn" class="admin-action-btn remove-btn">Retirer</button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="manage-tablet-modal-overlay" class="modal-overlay">
        <div class="admin-modal-content">
            <h2>Gérer l'état de la tablette.</h2>
            <div style="text-align: center; margin-bottom: 1.5rem; font-size: 1rem;">
                Statut actuel : <strong id="current-tablet-status">Chargement...</strong>
            </div>
            <div class="form-actions">
                <button data-status="open" class="admin-action-btn set-btn">Ouverte</button>
                <button data-status="paused" class="admin-action-btn pause-btn">En pause</button>
                <button data-status="closed" class="admin-action-btn remove-btn">Fermée</button>
            </div>
        </div>
    </div>

    <div id="user-list-modal-overlay" class="modal-overlay">
        <div class="admin-modal-content">
            <h2>Utilisateurs en ligne.</h2>
            <div id="user-list-container"></div>
        </div>
    </div>

    <audio id="easter-egg-audio" src="./audio/easter_egg.mp3" preload="auto"></audio>

    <script src="./script.js"></script>
</body>
</html>
